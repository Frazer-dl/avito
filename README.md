# Avito assignment
_______
Задача.
_______
https://github.com/avito-tech/geo-backend-trainee-assignment/blob/main/README.md

1. Детали реализации:

1.1 Писать код можно на любом языке программирования

1.2 Предоставить инструкцию по запуску приложения. В идеале (но не обязательно) – использовать контейнеризацию с возможностью запустить проект командой docker-compose up

1.3 Финальную версию нужно выложить на github.com (просьба не делать форк этого репозитория, дабы не плодить плагиат)

2. Необходимы функционал:

2.1 Клиент и сервер tcp(telnet)/REST API - реализовано (интеграция redis, имплементация in-memory cache redis на базе ehcache)

2.2 Key-value хранилище строк, списков, словарей - хранит любой объект

2.3 Возможность установить TTL на каждый ключ - реализована возможность установки ттл для базы/для кэша в целом

2.4 Реализовать операторы: GET, SET, DEL, KEYS - реализовано

2.5 Реализовать покрытие несколькими тестами функционала - реализовано для redis

3. Дополнительно (необязательно):

3.1 Реализовать операторы: HGET, HSET, LGET, LSET - HGET, HSET реализованы по умолчанию для работы с редис

3.2 Реализовать сохранение на диск - реализовано (требуется изменить системный путь переменной STORAGE_PATH в avito.assignment.redis.ITUtil для сохранения cache)

3.3 Масштабирование (на серверной или на клиентское стороне) - требует уточнения

3.4 Авторизация - не реализована

3.5 Нагрузочные тесты - не реализованы
_______
Решение.
_______
1.1 Для решения задачи использовался язык Java

1.2 Для запуска приложения docker-compose up были реализованы все условия, локальная сеть, 
postman -> docker сеть (контейнер 1 [spring-app] 8082, контейнер2 [redis]), более подробно в файле docker_trouble.md
Для запуска конфигурации потребуется установить redis, postman и IDE. Инструкции по установке можно найти на сайте разработчика.
После установки требуется:

- запустить через терминал redis-server, postman

- импортировать конфигурацию для проверок в postman "/avito/AVITO_ASSIGNMENT.postman_collection.json"

_______
Используются 2 набора для каждой подсистемы redis, cache.

    Описание команд:

    POST - создание и запись объекта,

    GET - получение и вывод на экран всех объектов,

    GET_ID - получение объекта по ID ("http://localhost:8082/cache/5"       ID = 5)

    DEL - удаление объекта по ID ("http://localhost:8082/cache/5"       ID = 5)

    TTL - установка параметра time-to-live ("http://localhost:8082/cache/ttl/30"        TTL = 30)

    SAVE - данная команда сохранит базу на диск(для redis используется директория по умолчанию - папка проекта, 
    для cache используется директория из переменной avito.assignment.redis.ITUtil STORAGE_PATH
_______

Из-за особенности системы для проведения проверки функционала работы

    с redis требуется использовать команду POST, затем TTL, через время t + TTL использовать команду GET
_______

    с cache использовать команду TTL, затем POST, через время t + TTL использовать команду GET
_______
- импортировать проект в IDE

- перейти в папку с проектом /avito/ и собрать проект командой mvn clean install

- запустить главный класс проекта

- использовать дополнительную информацию по проверкам из пункта 2
_______
2.1 Реализован клиент для проведения проверок с redis

Требуется дополнительно запустить класс клиента avito.assignment.redis.client.RestClientImpl
*Конфигурируется в методе main в ручную, перед запуском

2.2 Для большей гибкости в использовании и ухода от типизации для хранения используется Object.class - тело объекта и Long.class - ID объекта

2.3 Не реализовано задача TTL для каждого ключа из-за особенности библиотеки ehcache, данная возможность была предоставлена в ранних версиях библиотеки,
в более поздних эти методы убрали.

2.4 Операторы реализованы дополнительная информация указана в п.1.2

2.5 Реализованы функциональные тесты контроллера для redis и проверки соединения к бд
_______
3.1 HGET, HSET реализованы по умолчанию для работы с redis

3.2 Сохранение на диск реализовано для корректной работы требуется задать адрес директории.

3.3 Со стороны сервера для хранения используется Object.class, что делает систему более гибкой. В свою очередь дополнительно можно реализовать serializer/deserializer для хранения объектов любого типа в cache (в данный момент используется String при записи на диск)

3.4 Авторизация не реализована.

3.5 Нагрузочные тесты не реализованы.
